# Lambda è¡¨è¾¾å¼

è¡¥é¢˜æ—¶åˆ«äººä½¿ç”¨lambdaè¡¨è¾¾å¼æ„Ÿè§‰å¾ˆå¥½ç”¨ï¼Œå‡½æ•°å¯ä»¥è°ƒç”¨å±€éƒ¨å˜é‡ã€‚

```c++
//ç¦»æ•£åŒ–
vector<int> alls; 
sort(alls.begin(),alls.end());
int m = alls.erase(unique(alls.begin(),alls.end()),alls.end())-alls.begin();//æœ€åèŒƒå›´æ˜¯1-m
auto find = [alls](int x)->int{ //å‡½æ•°å¯ä»¥è®¿é—®å±€éƒ¨å˜é‡
    return  lower_bound(alls.begin(),alls.end(),x)-alls.begin()+1;
};
```

Lambda è¡¨è¾¾å¼æ˜¯ C++11 å¼•å…¥çš„ä¸€ç§åŒ¿åå‡½æ•°è¯­æ³•ï¼Œå¯ä»¥å¿«é€Ÿå®šä¹‰å’Œä½¿ç”¨å°å‹å‡½æ•°å¯¹è±¡ã€‚

## åŸºæœ¬è¯­æ³•ç»“æ„

```cpp
[æ•è·åˆ—è¡¨](å‚æ•°åˆ—è¡¨) -> è¿”å›ç±»å‹ { å‡½æ•°ä½“ }
```

## æœ€ç®€å•çš„ Lambda è¡¨è¾¾å¼

```cpp
auto sayHello = []() { 
    std::cout << "Hello Lambda!"; 
};
sayHello();  // è°ƒç”¨
```

## å¸¦å‚æ•°çš„ Lambda

```cpp
auto add = [](int a, int b) { 
    return a + b; 
};
std::cout << add(3, 5);  // è¾“å‡º 8
```

## æ•è·å¤–éƒ¨å˜é‡

### 1. ç©ºæ•è· `[]` - ä¸è®¿é—®ä»»ä½•å¤–éƒ¨å˜é‡

```cpp
auto pure = [](int x) { return x * x; };  // çº¯å‡½æ•°
cout << pure(5);  // è¾“å‡º25
```

**é€‚ç”¨åœºæ™¯**ï¼š  

- çº¯è®¡ç®—é€»è¾‘ï¼Œä¸ä¾èµ–å¤–éƒ¨çŠ¶æ€
- STLç®—æ³•ä¸­çš„ç®€å•è°“è¯ï¼ˆå¦‚`sort`çš„æ¯”è¾ƒå‡½æ•°ï¼‰

---

### 2. å€¼æ•è· `[var]` - å¤åˆ¶å˜é‡

```cpp
int base = 100;
auto addBase = [base](int x) { return x + base; };
cout << addBase(5);  // è¾“å‡º105

//é»˜è®¤æƒ…å†µä¸‹å€¼æ•è·çš„å˜é‡æ˜¯constçš„ï¼Œä½¿ç”¨mutableå¯ä»¥ä¿®æ”¹
int counter = 0;
auto inc = [counter]() mutable { 
    return ++counter;  // å¯ä»¥ä¿®æ”¹counterçš„å‰¯æœ¬
};
```

**å…³é”®ç‰¹æ€§**ï¼š  
âœ… æ•è·æ—¶**å›ºå®šå˜é‡å€¼**ï¼ˆåç»­å¤–éƒ¨ä¿®æ”¹ä¸å½±å“ï¼‰  
âŒ é»˜è®¤ä¸èƒ½ä¿®æ”¹ï¼ˆé™¤éåŠ `mutable`ï¼‰  

**ç¦»æ•£åŒ–åº”ç”¨**ï¼š  

```cpp
// ç¦»æ•£åŒ–å¸¸ç”¨å†™æ³•
sort(alls.begin(), alls.end());
auto find = [alls](int x) {  // å¤åˆ¶æ’åºåçš„æ•°ç»„
    return lower_bound(alls.begin(), alls.end(), x) - alls.begin();
};
```

---

### 3. å¼•ç”¨æ•è· `[&var]` - ç›´æ¥æ“ä½œåŸå˜é‡

```cpp
int cnt = 0;
vector<int> nums = {1,2,3};
for_each(nums.begin(), nums.end(), [&cnt](int x) {
    cnt += x;  // ç›´æ¥ä¿®æ”¹å¤–éƒ¨cnt
});
cout << cnt;  // è¾“å‡º6
```

**å…³é”®ç‰¹æ€§**ï¼š  
âœ… å¯ä¿®æ”¹åŸå˜é‡  
âš ï¸ æ³¨æ„å˜é‡ç”Ÿå‘½å‘¨æœŸï¼ˆLambdaå¯èƒ½æ¯”å˜é‡å­˜æ´»æ›´ä¹…ï¼‰  

**DFSåº”ç”¨**ï¼š  

```cpp
// DFSä¸­çš„è®¿é—®æ ‡è®°
vector<bool> vis(n); //éœ€è¦ä¿®æ”¹
auto dfs = [&](int u) {  // é€’å½’Lambdaå¿…é¡»ç”¨å¼•ç”¨æ•è·è‡ªèº«
    vis[u] = true;
    // ...
};

// å¹¶æŸ¥é›†å¸¦è·¯å¾„å‹ç¼©
vector<int> fa(n);
auto find = [&fa](int x) {  // åªå¼•ç”¨æ•è·fa
    return fa[x] == x ? x : fa[x] = find(fa[x]);
};
```

---

### 4. éšå¼å…¨æ•è· `[=]` å’Œ `[&]`

```cpp
int a = 1, b = 2;
auto sum = [=]() { return a + b; };  // å€¼æ•è·æ‰€æœ‰
auto inc = [&]() { a++; b++; };      // å¼•ç”¨æ•è·æ‰€æœ‰
```

**ä½¿ç”¨å»ºè®®**ï¼š  
ğŸš« æ…ç”¨ï¼æ˜ç¡®å†™å‡ºéœ€è¦æ•è·çš„å˜é‡æ›´å®‰å…¨  
âœ… ä»…é€‚åˆä¸´æ—¶å¿«é€Ÿç¼–ç ï¼ˆå¦‚AtCoderçš„çŸ­ä»£ç ï¼‰

---

### 5. æ··åˆæ•è· `[var1, &var2]`

```cpp
int config = 10, result = 0;
auto calc = [config, &result](int x) {
    result = x * config;  // configåªè¯»ï¼Œresultå¯å†™
};
```

---

### ğŸ“ æ€»ç»“

| æ•è·æ–¹å¼       | è¯­æ³•     | æ³¨æ„äº‹é¡¹                  |
| -------------- | -------- | ------------------------- |
| ä¸æ•è·         | `[]`     | STLç®—æ³•é¦–é€‰               |
| å€¼æ•è·         | `[var]`  | æœ€å®‰å…¨ï¼Œæ¨è              |
| å¼•ç”¨æ•è·       | `[&var]` | é€’å½’/ä¿®æ”¹å¤–éƒ¨å˜é‡æ—¶å¿…é¡»ç”¨ |
| éšå¼å…¨å€¼æ•è·   | `[=]`    | é¿å…ä½¿ç”¨                  |
| éšå¼å…¨å¼•ç”¨æ•è· | `[&]`    | å¿«é€Ÿç¼–ç æ—¶å¶å°”ç”¨          |
| æ··åˆæ•è·       | `[a,&b]` | ç²¾å‡†æ§åˆ¶æ•è·              |

## è¿”å›ç±»å‹æ¨æ–­

å¤§å¤šæ•°æƒ…å†µä¸‹å¯ä»¥çœç•¥è¿”å›ç±»å‹ï¼š

```cpp
auto square = [](int x) { return x * x; };  // è‡ªåŠ¨æ¨æ–­è¿”å›int
```

éœ€è¦æ˜¾å¼å£°æ˜è¿”å›ç±»å‹çš„æƒ…å†µï¼š

```cpp
auto divide = [](double a, double b) -> double {
    if(b == 0) return 0;
    return a / b;
};
```

## ç«‹å³è°ƒç”¨çš„ Lambda

```cpp
int result = [](int x) { return x * x; }(5);  // result = 25
```
